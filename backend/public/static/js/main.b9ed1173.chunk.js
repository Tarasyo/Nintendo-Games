(this["webpackJsonpiwa-ca2"]=this["webpackJsonpiwa-ca2"]||[]).push([[0],Array(21).concat([function(e,a,t){},,,,,,function(e,a,t){e.exports=t(55)},,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),i=(t(32),t(4)),u=t(11),o=t(3),s=t.n(o),m=t(6),d=t(1),p=(t(34),function(e){return r.a.createElement("div",{className:"avatar ".concat(e.className),style:e.style},r.a.createElement("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}}))}),E=(t(35),function(e){return r.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}),v=(t(36),function(e){return r.a.createElement("li",{className:"genre-item"},r.a.createElement(E,{className:"genre-item__content"},r.a.createElement(i.b,{to:"/".concat(e._id,"/games")},r.a.createElement("div",{className:"genre-item__image"},r.a.createElement(p,{image:e.image,alt:e.name})),r.a.createElement("div",{className:"genre-item__info"},r.a.createElement("h2",null,e.name)))))}),f=(t(42),function(e){return 0===e.items.length?r.a.createElement("div",{className:"center"},r.a.createElement(E,null,r.a.createElement("h2",null,"Genre not found."))):r.a.createElement("ul",{className:"genre-list"},e.items.map((function(e){return r.a.createElement(v,{key:e._id,_id:e._id,id:e.id,image:e.image,name:e.name,gamesCount:e.games.length})})))}),b=t(56),g=(t(43),function(e){return c.a.createPortal(r.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),h=(t(44),function(e){var a=r.a.createElement("div",{className:"modal ".concat(e.className),style:e.style},r.a.createElement("header",{className:"modal__header ".concat(e.headerClass)},r.a.createElement("h2",null,e.header)),r.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal__content ".concat(e.contentClass)},e.children),r.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer)));return c.a.createPortal(a,document.getElementById("modal-hook"))}),y=function(e){return r.a.createElement(r.a.Fragment,null,e.show&&r.a.createElement(g,{onClick:e.onCancel}),r.a.createElement(b.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal"},r.a.createElement(h,e)))},O=(t(45),function(e){return e.href?r.a.createElement("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href},e.children):e.to?r.a.createElement(i.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger")},e.children):r.a.createElement("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}),k=function(e){return r.a.createElement(y,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:r.a.createElement(O,{onClick:e.onClear},"Okay")},r.a.createElement("p",null,e.error))},N=(t(46),function(e){return r.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},r.a.createElement("div",{className:"lds-dual-ring"}))}),I=function(){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(),c=Object(d.a)(l,2),i=c[0],u=c[1],o=Object(n.useRef)([]),p=Object(n.useCallback)(function(){var e=Object(m.a)(s.a.mark((function e(a){var t,n,l,c,i,m,d=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:"GET",n=d.length>2&&void 0!==d[2]?d[2]:null,l=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),c=new AbortController,o.current.push(c),e.prev=6,e.next=9,fetch(a,{method:t,body:n,headers:l,signal:c.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(m=e.sent,o.current=o.current.filter((function(e){return e!==c})),i.ok){e.next=16;break}throw new Error(m.message);case 16:return console.log(m),r(!1),e.abrupt("return",m);case 21:throw e.prev=21,e.t0=e.catch(6),u(e.t0.message),r(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(a){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,error:i,sendRequest:p,clearError:function(){u(null)}}},j=function(){var e=I(),a=e.isLoading,t=e.error,l=e.sendRequest,c=e.clearError,i=Object(n.useState)(),u=Object(d.a)(i,2),o=u[0],p=u[1];return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("http://tarasyo.me/api/genre/");case 3:a=e.sent,p(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{error:t,onClear:c}),a&&r.a.createElement("div",{className:"center"},r.a.createElement(N,null)),!a&&o&&r.a.createElement(f,{items:o}))},V=t(13),C=t(24),x=function(e){return{type:"MAX",val:e}},_=function(e,a){var t,n=!0,r=Object(C.a)(a);try{for(r.s();!(t=r.n()).done;){var l=t.value;"REQUIRE"===l.type&&(n=n&&e.trim().length>0),"MINLENGTH"===l.type&&(n=n&&e.trim().length>=l.val),"MAXLENGTH"===l.type&&(n=n&&e.trim().length<=l.val),"MIN"===l.type&&(n=n&&+e>=l.val),"MAX"===l.type&&(n=n&&+e<=l.val),"EMAIL"===l.type&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){r.e(c)}finally{r.f()}return n},w=(t(47),function(e,a){switch(a.type){case"CHANGE":return Object(V.a)({},e,{value:a.val,isValid:_(a.val,a.validators)});case"TOUCH":return Object(V.a)({},e,{isTouched:!0});default:return e}}),R=function(e){var a=Object(n.useReducer)(w,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),t=Object(d.a)(a,2),l=t[0],c=t[1],i=e.id,u=e.onInput,o=l.value,s=l.isValid;Object(n.useEffect)((function(){u(i,o,s)}),[i,o,s,u]);var m=function(a){c({type:"CHANGE",val:a.target.value,validators:e.validators})},p="input"===e.element?r.a.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:m,onBlur:function(){c({type:"TOUCH"})},value:l.value}):r.a.createElement("select",{id:e.id,value:l.value,onChange:m},r.a.createElement("option",{value:""}," -- select an option -- "),r.a.createElement("option",{value:"5ea843e99293e91547d742c7"},"Adventure"),r.a.createElement("option",{value:"5ea8445d9293e91547d742c8"},"Role-playing"),r.a.createElement("option",{value:"5ea5ef68be62a5d46a660f80"},"Sports"),r.a.createElement("option",{value:"5ea844f39293e91547d742c9"},"Life Simulation"),r.a.createElement("option",{value:"5ea845679293e91547d742ca"},"Fighting game"));return r.a.createElement("div",{className:"form-control ".concat(!l.isValid&&l.isTouched&&"form-control--invalid")},r.a.createElement("label",{htmlFor:e.id},e.label),p,!l.isValid&&l.isTouched&&r.a.createElement("p",null,e.errorText))},T=(t(48),function(e){var a=Object(n.useState)(),t=Object(d.a)(a,2),l=t[0],c=t[1],i=Object(n.useState)(),u=Object(d.a)(i,2),o=u[0],s=u[1],m=Object(n.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1],f=Object(n.useRef)();Object(n.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){s(e.result)},e.readAsDataURL(l)}}),[l]);return r.a.createElement("div",{className:"form-control"},r.a.createElement("input",{id:e.id,ref:f,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(a){var t,n=E;a.target.files&&1===a.target.files.length?(t=a.target.files[0],c(t),v(!0),n=!0):(v(!1),n=!1),e.onInput(e.id,t,n)}}),r.a.createElement("div",{className:"image-upload ".concat(e.center&&"center")},r.a.createElement("div",{className:"image-upload__preview"},o&&r.a.createElement("img",{src:o,alt:"Preview"}),!o&&r.a.createElement("p",null,"Please pick an image.")),r.a.createElement(O,{type:"button",onClick:function(){f.current.click()}},"PICK IMAGE")),!E&&r.a.createElement("p",null,e.errorText))}),A=t(14),P=function(e,a){switch(a.type){case"INPUT_CHANGE":var t=!0;for(var n in e.inputs)t=n===a.inputId?t&&a.isValid:t&&e.inputs[n].isValid;return Object(V.a)({},e,{inputs:Object(V.a)({},e.inputs,Object(A.a)({},a.inputId,{value:a.value,isValid:a.isValid})),isValid:t});case"SET_DATA":return{inputs:a.inputs,isValid:a.formIsValid};default:return e}},S=function(e,a){var t=Object(n.useReducer)(P,{inputs:e,isValid:a}),r=Object(d.a)(t,2),l=r[0],c=r[1];return[l,Object(n.useCallback)((function(e,a,t){c({type:"INPUT_CHANGE",value:a,isValid:t,inputId:e})}),[]),Object(n.useCallback)((function(e,a){c({type:"SET_DATA",inputs:e,formIsValid:a})}),[])]},D=(t(21),function(){var e=I(),a=e.isLoading,t=e.error,n=e.sendRequest,l=e.clearError,c=S({name:{value:"",isValid:!1},publisher:{value:"",isValid:!1},release:{value:"",isValid:!1},director:{value:"",isValid:!1},rank:{value:"",isValid:!1},image:{value:"",isValid:!1},genreId:{value:"",isValid:!1}},!1),i=Object(d.a)(c,2),o=i[0],p=i[1],E=Object(u.g)(),v=function(){var e=Object(m.a)(s.a.mark((function e(a){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,(t=new FormData).append("name",o.inputs.name.value),t.append("publisher",o.inputs.publisher.value),t.append("image",o.inputs.image.value),t.append("release",o.inputs.release.value),t.append("director",o.inputs.director.value),t.append("rank",o.inputs.rank.value),t.append("genreId",o.inputs.genreId.value),e.next=12,n("http://tarasyo.me/api/games/","POST",t);case 12:E.push("/"),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(1);case 17:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{error:t,onClear:l}),r.a.createElement("form",{className:"game-form",onSubmit:v},a&&r.a.createElement(N,{asOverlay:!0}),r.a.createElement(R,{id:"name",element:"input",type:"text",label:"Name",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid name.",onInput:p}),r.a.createElement(R,{id:"publisher",element:"input",label:"Publisher",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid name.",onInput:p}),r.a.createElement(R,{id:"release",element:"input",label:"Release",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid release.",onInput:p}),r.a.createElement(R,{id:"director",element:"input",label:"Director",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid director.",onInput:p}),r.a.createElement(R,{id:"rank",element:"input",label:"Rank",validators:[x(10)],errorText:"Please enter a valid Rank MAX 10.",onInput:p}),r.a.createElement(T,{id:"image",onInput:p,errorText:"Please provide an image."}),r.a.createElement(R,{id:"genreId",element:"select",label:"Select Genre",validators:[{type:"REQUIRE"}],errorText:"Please enter one of the Genre.",onInput:p}),r.a.createElement(O,{type:"submit",disabled:!o.isValid},"ADD GAME")))}),G=(t(49),function(e){var a=I(),t=a.isLoading,l=a.error,c=a.sendRequest,i=a.clearError,u=Object(n.useState)(!1),o=Object(d.a)(u,2),p=o[0],v=o[1],f=function(){v(!1)},b=function(){var a=Object(m.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(!1),a.prev=1,a.next=4,c("http://localhost:5000/api/games/".concat(e.id),"DELETE");case 4:e.onDelete(e.id),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(1);case 9:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{error:l,onClear:i}),r.a.createElement(y,{show:p,onCancel:f,header:"Are you sure?",footerClass:"game-item__modal-actions",footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{inverse:!0,onClick:f},"CANCEL"),r.a.createElement(O,{danger:!0,onClick:b},"DELETE"))},r.a.createElement("p",null,"Do you want to proceed and delete this Game? Please note that it can't be undone thereafter.")),r.a.createElement("li",{className:"game-item"},r.a.createElement(E,{className:"game-item__content"},t&&r.a.createElement(N,{asOverlay:!0}),r.a.createElement("div",{className:"game-item__image"},r.a.createElement("img",{src:"http://tarasyo.me/".concat(e.image),alt:e.name})),r.a.createElement("div",{className:"game-item__info"},r.a.createElement("h2",null,e.name),r.a.createElement("h3",null,"Publisher: ",e.publisher),r.a.createElement("p",null,"Release: ",e.release," Director: ",e.director),r.a.createElement("h3",null,"RANK: ",e.rank)),r.a.createElement("div",{className:"game-item__actions"},r.a.createElement(O,{to:"/games/".concat(e.id)}," EDIT"),r.a.createElement(O,{danger:!0,onClick:function(){v(!0)}},"DELETE")))))}),U=(t(50),function(e){return 0===e.items.length?r.a.createElement("div",{className:"game-list center"},r.a.createElement(E,null,r.a.createElement("h2",null,"No games found. Maybe create one?"),r.a.createElement(O,{to:"/games/new"},"Share game"))):r.a.createElement("ul",{className:"game-list"},e.items.map((function(a){return r.a.createElement(G,{key:a._id,id:a._id,image:a.image,name:a.name,publisher:a.publisher,release:a.release,director:a.director,rank:a.rank,genreId:a.genreId,onDelete:e.onDeleteGame})})))}),L=function(){var e=Object(n.useState)(),a=Object(d.a)(e,2),t=a[0],l=a[1],c=I(),i=c.isLoading,o=c.error,p=c.sendRequest,E=c.clearError,v=Object(u.h)().genreId;Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("http://tarasyo.me/api/games/genre/".concat(v));case 3:a=e.sent,l(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[p,v]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{error:o,onClear:E}),i&&r.a.createElement("div",{className:"center"},r.a.createElement(N,null)),!i&&t&&r.a.createElement(U,{items:t,onDeleteGame:function(e){l((function(a){return a.filter((function(a){return a._id!==e}))}))}}))},M=function(){var e=I(),a=e.isLoading,t=e.error,l=e.sendRequest,c=e.clearError,i=Object(n.useState)(),o=Object(d.a)(i,2),p=o[0],v=o[1],f=Object(u.h)().gameId,b=S({name:{value:"",isValid:!1},publisher:{value:"",isValid:!1},release:{value:"",isValid:!1},director:{value:"",isValid:!1},rank:{value:"",isValid:!1},imageUrl:{value:"",isValid:!1},genreId:{value:"",isValid:!1}},!1),g=Object(d.a)(b,3),h=g[0],y=g[1],j=g[2];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("http://tarasyo.me/api/games/".concat(f));case 3:a=e.sent,v(a),j({name:{value:a.name,isValid:!0},publisher:{value:a.publisher,isValid:!0},release:{value:a.release,isValid:!0},director:{value:a.director,isValid:!0},rank:{value:a.rank,isValid:!0},genreId:{value:a.genreId,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[l,f,j]);var V=Object(u.g)(),C=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,l("http://tarasyo.me/api/games/".concat(f),"PATCH",JSON.stringify({name:h.inputs.name.value,publisher:h.inputs.publisher.value,release:h.inputs.release.value,director:h.inputs.director.value,rank:h.inputs.rank.value,genreId:h.inputs.genreId.value}),{"Content-Type":"application/json"});case 4:V.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}();return a?r.a.createElement("div",{className:"center"},r.a.createElement(N,null)):p||t?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{error:t,onClear:c}),!a&&p&&r.a.createElement("form",{className:"game-form",onSubmit:C},r.a.createElement(R,{id:"name",element:"input",type:"text",label:"Name",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid name.",onInput:y,initialValue:p.name,initialValid:!0}),r.a.createElement(R,{id:"publisher",element:"input",label:"Publisher",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid name.",onInput:y,initialValue:p.publisher,initialValid:!0}),r.a.createElement(R,{id:"release",element:"input",label:"Release",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid release.",onInput:y,initialValue:p.release,initialValid:!0}),r.a.createElement(R,{id:"director",element:"input",label:"Director",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid director.",onInput:y,initialValue:p.director,initialValid:!0}),r.a.createElement(R,{id:"rank",element:"input",label:"Rank",validators:[x(10)],errorText:"Please enter a valid Rank MAX 10.",onInput:y,initialValue:p.rank,initialValid:!0}),r.a.createElement(R,{id:"genreId",element:"select",label:"Select Genre",validators:[{type:"REQUIRE"}],errorText:"Please enter one of the Genre.",onInput:y,initialValue:p.genreId,initialValid:!0}),r.a.createElement(O,{type:"submit",disabled:!h.isValid},"UPDATE GAME"))):r.a.createElement("div",{className:"center"},r.a.createElement(E,null,r.a.createElement("h2",null,"Could not find Game!")))},F=(t(51),function(e){return r.a.createElement("header",{className:"main-header"},e.children)}),Q=(t(52),function(e){return r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(i.c,{to:"/",exact:!0},"All Genres")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/games/new"},"Add Game")))}),H=(t(53),function(e){var a=r.a.createElement(b.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return c.a.createPortal(a,document.getElementById("drawer-hook"))}),q=(t(54),function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2),l=t[0],c=t[1],u=function(){c(!1)};return r.a.createElement(r.a.Fragment,null,l&&r.a.createElement(g,{onClick:u}),r.a.createElement(H,{show:l,onClick:u},r.a.createElement("nav",{className:"main-navigation__drawer-nav"},r.a.createElement(Q,null))),r.a.createElement(F,null,r.a.createElement("button",{className:"main-navigation__menu-btn",onClick:function(){c(!0)}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("h1",{className:"main-navigation__title"},r.a.createElement(i.b,{to:"/"},"My Nintendo Games")),r.a.createElement("nav",{className:"main-navigation__header-nav"},r.a.createElement(Q,null))))}),B=function(){return r.a.createElement(i.a,null,r.a.createElement(q,null),r.a.createElement("main",null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(j,null)),r.a.createElement(u.b,{path:"/:genreId/games",exact:!0},r.a.createElement(L,null)),r.a.createElement(u.b,{path:"/games/new",exact:!0},r.a.createElement(D,null)),r.a.createElement(u.b,{path:"/games/:gameId"},r.a.createElement(M,null)),r.a.createElement(u.a,{to:"/"}))))};c.a.render(r.a.createElement(B,null),document.getElementById("root"))}]),[[27,1,2]]]);
//# sourceMappingURL=main.b9ed1173.chunk.js.map